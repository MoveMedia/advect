<template id="todo-item" todoName="string" todoComplete="boolean" onFinish="callback" adv>
  <style>
    todo-item {
      list-style: none;

      li {
        transition: all 0.1s;
      }

      &[todoComplete="true"] {
        & .title {
          text-decoration: line-through;
        }
      }
    }
  </style>
  <script>
    const { todoComplete, onFinish, todoName } = $self.attr;
    const { completeBtn, deleteBtn, item } = $self.refs;

    const introTodoAnim = [
        { opacity: 0, height: 0 },
        { opacity: 1, height: 'auto' },
      ];

      const introAnimTiming = {
        duration: 200,
        iterations: 1,
        fill: "both",
     };

    const deleteTodoAnim = [
        { opacity: 1, height: 'auto' },
        { opacity: 0, height: 0 },
      ];

      const deleteAnimTiming = {
        duration: 200,
        iterations: 1,
        fill: "both",
     };

    const completedText = "âœ… Finished";
    const incompletedText = "ðŸ”¥ Finish";

    completeBtn.innerText = todoComplete.value
      ? completedText
      : incompletedText;

    const finishTodo = () => {
      todoComplete.value = true;
      completeBtn.innerText = completedText;
      onFinish?.value(todoName.value);
    };
    const unfinishTodo = () => {
      todoComplete.value = false;
      completeBtn.innerText = incompletedText;
    };

    const introTodo = () => {
      $self.animate(introTodoAnim, introAnimTiming);
    };
    const deleteTodo = () => {
      $self.animate(deleteTodoAnim, deleteAnimTiming).onfinish = () => {
        console.log('delete');
        $self.remove();
      };  
    };

    return {
      todoName,
      todoComplete,
      finishTodo,
      unfinishTodo,
      deleteTodo,
      introTodo,
    };
  </script>

  <li id="item" onload="{
        $scope.introTodo();
  }">
    <input id="title" class="title" onload="{
        $ref.value = $scope.todoName.value ?? '';
      }" />
    <button id="completeBtn" onclick="{
        if ($scope.todoComplete.value === true) {
            $scope.unfinishTodo()
        }else{
            $scope.finishTodo()
        }
        }"></button>
    <button id="deleteBtn" onclick="$scope.deleteTodo()">Delete</button>
  </li>
</template>