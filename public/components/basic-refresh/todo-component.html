<template id="todo-component" adv>
    <script>
        
        const scope = {
            log: () => {
                console.log('log');
            },
            removeTodo: (todoEl) => {
                todo.remove();
            },
        }
        self.refs.todo_view.mergeScope(scope);

        self.refs.todo_view.render({
            todos: [
                { id: `todo_1`, title: 'Todo 1', complete: false },
                { id: `todo_2`, title: 'Todo 2', complete: true },
                { id: `todo_3`, title: 'Todo 3', complete: false },
            ]
        }).then(()=>{
            // console.log(todo_view.el);
        });
        return scope;
    </script>
    <style>

    </style>
    <div>
        <button id="add_btn" onclick="self.shadowRoot.querySelector('dialog').showModal()">Add Todo</button>
    </div>
    <ul>
        <adv-view id="todo_view">
            [[#todos]]
            <li data-title="[[title]]" id="[[id]]" data-id="[[id]]" data-complete="[[complete]]">
                <span>
                    [[title]]  
                </span>
                <span>
                    [[#complete]]
                        <button id="complete_[[id]]" onclick="console.log(self.refs, self, scope)">Mark incomplete</button>
                    [[/complete]]

                    [[^complete]]
                        <button>Complete</button>
                    [[/complete]]
                </span>
            </li>
            [[/todos]]
            [[^todos]]
            <li>No todos yet</li>
            [[/todos]]
        </adv-view>
    </ul>
    <dialog id="new_todo_diag">
        <form id="form" method="dialog">
            <input type="text" name="todo" id="todo" placeholder="Add a todo">
            <input type="submit" value="Submit">
        </form>
    </dialog>
</template>